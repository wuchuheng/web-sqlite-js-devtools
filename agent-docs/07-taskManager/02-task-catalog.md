<!--
TEMPLATE MAP (reference-only)
.claude/templates/docs/07-task-catalog.md

OUTPUT MAP (write to)
agent-docs/07-taskManager/02-task-catalog.md

NOTES
- This is the SOURCE OF TRUTH for the "Worker Agent".
- Release-grouped: tasks live under a release version header.
- Status is tracked via checkbox markers.
- Tasks consolidated to 12 broad, actionable items.
-->

# 02 Task Catalog (Release Grouped)

## Status Legend

- `[ ]` **Pending**: Ready to be picked up.
- `[-]` **In Progress**: Currently being executed by a Worker.
- `[x]` **Completed**: Tested, Verified, and Merged.

---

## Release v1.0.0 (MVP) - Target: 2026-01-27

- [x] **TASK-01**: Project Setup & Configuration
  - **Priority**: P0 (Blocker)
  - **Dependencies**: None
  - **Boundary**: `src/manifest.ts`, `src/messaging/`, `devtools.html`, `src/devtools/index.tsx`
  - **Maps to**: FR-001, FR-004, FR-005, FR-039
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-01.md)
  - **Bug Fix**: DevTools panel creation script with "Sqlite" label added to devtools.html (2026-01-13)
  - **DoD**:
    - Manifest with extension name "web-sqlite devtools", permissions (activeTab, tabs)
    - Message channels TypeScript definitions (10 channels, Response<T> type)
    - DevTools panel opens with "Sqlite" label
    - React Router HashRouter with routes `/`, `/openedDB/:dbname`, `/opfs`

- [x] **TASK-02**: Sidebar UI & Navigation
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-01
  - **Boundary**: `src/devtools/components/Sidebar/`, `src/devtools/components/EmptyState/`
  - **Maps to**: FR-006, FR-007, FR-012, FR-014, FR-042, FR-044
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-02.md)
  - **DoD**:
    - Sidebar with SiSqlite icon + "Web Sqlite" (20% width)
    - SidebarHeader with collapse toggle (20% <-> icon-only)
    - EmptyState with helpful instructions
    - DatabaseList, OPFSLink navigation items

- [x] **TASK-03**: Content Script Proxy & Background Messaging
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-01
  - **Boundary**: `src/contentScript/`, `src/background/`
  - **Maps to**: ADR-0001, ADR-0004, FR-039
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-03.md)
  - **DoD**:
    - Content script message listener routing by channel
    - Background service message routing (panel <-> content script)
    - Database proxy with getDatabases, Map->Array serialization
    - All proxy handlers stubbed for 10 channels

- [x] **TASK-04**: Icon State & Auto-Reconnect
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-03
  - **Boundary**: `src/contentScript/App.tsx`, `src/background/iconState/`, `src/devtools/hooks/useConnection.ts`
  - **Maps to**: FR-002, FR-003, FR-041, ADR-0006
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-04.md)
  - **DoD**:
    - Content script detects `window.__web_sqlite` availability
    - ICON_STATE message with active/inactive states
    - Icon assets (active: colored, inactive: grayscale)
    - Heartbeat every 5s with exponential backoff (1s, 2s, 4s, 8s, 15s)

- [x] **TASK-05**: Database List & Table Browser
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-03, TASK-02
  - **Boundary**: `src/devtools/inspectedWindow.ts`, `src/devtools/components/Sidebar/DatabaseList.tsx`, `src/devtools/components/TableTab/`
  - **Maps to**: FR-001, FR-008, FR-009, FR-016, FR-017
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.md)
  - **DoD**:
    - inspectedWindow eval with PRAGMA queries, alphabetical sort
    - DatabaseList in sidebar, nested under "Opened DB"
    - Clicking database navigates to `/openedDB/:dbname`
    - TableList component with alphabetical tables, active state styling

### Feature F-001: Service Layer Expansion Tasks

- [x] **TASK-05.1**: Service Layer - Table Schema Functions
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05
  - **Boundary**: `src/devtools/services/databaseService.ts`, `src/devtools/bridge/inspectedWindow.ts`
  - **Maps to**: F-001, FR-018, FR-019, FR-020, FR-021, FR-022, FR-023, FR-043
  - **Feature**: F-001 Service Layer Expansion - Schema Inspection Group
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.1.md)
  - **DoD**:
    - Implement `getTableSchema(dbname, tableName)` service function
      - Query `PRAGMA table_info(tableName)` for column details
      - Query `SELECT sql FROM sqlite_master WHERE type='table' AND name=?` for DDL
      - Return `ServiceResponse<{ columns: ColumnInfo[], ddl: string }>`
      - Validate database and table exist
      - Handle errors: table not found, SQL errors
    - Implement `queryTableData(dbname, sql, limit, offset)` service function
      - Validate SQL is SELECT (optional safety check)
      - Wrap user SQL: `SELECT * FROM (${sql}) LIMIT ? OFFSET ?`
      - Execute count query: `SELECT COUNT(*) FROM (${sql})`
      - Extract column names from first row keys
      - Return `ServiceResponse<{ rows: Row[], total: number, columns: string[] }>`
    - Add TypeScript types for `ColumnInfo`, `QueryResult`, `TableSchema`
    - Export functions via `databaseService` object
    - Unit tests with mocked bridge layer
    - Update `databaseService.ts` with JSDoc comments

- [x] **TASK-05.2**: Service Layer - SQL Execution Functions
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05.1
  - **Boundary**: `src/devtools/services/databaseService.ts`, `src/devtools/bridge/inspectedWindow.ts`
  - **Maps to**: F-001, FR-024, FR-025, FR-026, FR-027
  - **Feature**: F-001 Service Layer Expansion - Query Execution Group
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.2.md)
  - **DoD**:
    - Implement `execSQL(dbname, sql, params?)` service function
      - Execute SQL with parameters using `db.exec(sql, params)`
      - Support both positional (`[]`) and named (`{}`) parameters
      - Return `ServiceResponse<{ lastInsertRowid: number | bigint, changes: number | bigint }>`
      - Handle constraint violation errors
      - Validate parameter count matches placeholders
    - Add TypeScript types for `ExecResult`, `SqlValue`
    - Export function via `databaseService` object
    - Unit tests with mocked bridge layer
    - Update `databaseService.ts` with JSDoc comments

- [x] **TASK-05.3**: Service Layer - Log Streaming Functions
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05.2
  - **Boundary**: `src/devtools/services/databaseService.ts`, `src/devtools/bridge/inspectedWindow.ts`, `src/contentScript/subscriptions/LogRingBuffer.ts`
  - **Maps to**: F-001, FR-026, FR-029, FR-030, ADR-0004, ADR-0005
  - **Feature**: F-001 Service Layer Expansion - Log Streaming Group
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.3.md)
  - **DoD**:
    - Implement `subscribeLogs(dbname)` service function
      - Generate unique subscription ID (e.g., `sub_${Date.now()}_${Math.random()}`)
      - Call `window.__web_sqlite.subscribeLogs(dbname, callback)`
      - Store subscription in internal Map for cleanup
      - Return `ServiceResponse<{ subscriptionId: string }>`
      - Validate database exists
      - Handle subscription limit errors
    - Implement `unsubscribeLogs(subscriptionId)` service function
      - Look up subscription from internal Map
      - Call `window.__web_sqlite.unsubscribeLogs(subscriptionId)`
      - Remove from internal Map
      - Return `ServiceResponse<void>`
      - Handle subscription not found errors
    - Add TypeScript types for `LogSubscription`, `LogEntry`
    - Export functions via `databaseService` object
    - Unit tests with mocked bridge layer
    - Integration tests with LogRingBuffer
    - Update `databaseService.ts` with JSDoc comments

- [x] **TASK-05.4**: Service Layer - Migration & Versioning Functions
  - **Priority**: P1
  - **Dependencies**: TASK-05.2
  - **Boundary**: `src/devtools/services/databaseService.ts`, `src/devtools/bridge/inspectedWindow.ts`
  - **Maps to**: F-001, FR-031, FR-032, FR-033, FR-034
  - **Feature**: F-001 Service Layer Expansion - Migration Group
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.4.md)
  - **DoD**:
    - Implement `devRelease(dbname, version, migrationSQL?, seedSQL?)` service function
      - Create dev database copy: `${dbname}-dev-${version}`
      - Apply migration SQL if provided
      - Apply seed SQL if provided
      - Store original version for rollback
      - Return `ServiceResponse<{ devVersion: string }>`
      - Handle SQL errors from migration/seed
      - Validate dev version doesn't already exist
    - Implement `devRollback(dbname, toVersion)` service function
      - Drop dev database
      - Restore from backup or switch to specific version
      - Update version tracking in web-sqlite-js
      - Return `ServiceResponse<{ currentVersion: string }>`
      - Handle version locked errors
    - Implement `getDbVersion(dbname)` service function
      - Query `PRAGMA user_version` for SQLite version
      - Fallback to web-sqlite-js version tracking
      - Return `ServiceResponse<{ version: string }>`
      - Return "0.0.0" if no version set
    - Add TypeScript types for `DevRelease`, `DbVersion`
    - Export functions via `databaseService` object
    - Unit tests with mocked bridge layer
    - Update `databaseService.ts` with JSDoc comments

- [x] **TASK-05.5**: Service Layer - OPFS File Browser Functions
  - **Priority**: P1
  - **Dependencies**: TASK-05.2
  - **Boundary**: `src/devtools/services/databaseService.ts`, `src/devtools/bridge/inspectedWindow.ts`
  - **Maps to**: F-001, FR-010, FR-011, FR-027, FR-028, FR-036, FR-037, FR-038
  - **Feature**: F-001 Service Layer Expansion - OPFS Group
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.5.md)
  - **DoD**:
    - Implement `getOpfsFiles(path?, dbname?)` service function
      - Call `navigator.storage.getDirectory()` in inspected page
      - Navigate to `path` (defaults to root)
      - List directory contents with `for await of`
      - Filter by `dbname` if provided
      - Convert file sizes to human-readable format (KB, MB, GB)
      - Return `ServiceResponse<OpfsFileEntry[]>`
      - Handle OPFS not supported errors
      - Return empty array if directory is empty
    - Implement `downloadOpfsFile(path)` service function
      - Resolve file handle from `path`
      - Read file contents into ArrayBuffer
      - Create Blob from ArrayBuffer
      - Create object URL: `URL.createObjectURL(blob)`
      - Extract filename from path
      - Return `ServiceResponse<{ blobUrl: string; filename: string }>`
      - Handle file not found errors
      - Document caller responsibility for URL cleanup
    - Add TypeScript types for `OpfsFileEntry`, `DownloadResult`
    - Export functions via `databaseService` object
    - Unit tests with mocked bridge layer
    - Update `databaseService.ts` with JSDoc comments

### Component Migration Tasks

- [x] **TASK-05.6**: Component Migration - Table Browser Components
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05.1
  - **Boundary**: `src/devtools/components/TableTab/`, `src/devtools/components/Sidebar/DatabaseList.tsx`
  - **Maps to**: F-001, FR-007
  - **Feature**: F-001 Service Layer Expansion - Component Migration
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-05.6.md)
  - **DoD**:
    - Update `Sidebar/DatabaseList.tsx` to use `databaseService.getDatabases()`
      - Remove direct `inspectedWindow` import
      - Import from `@/devtools/services/databaseService`
      - Handle `ServiceResponse` envelope
      - Test database list loading
    - Update `TableTab/TableList.tsx` to use `databaseService.getTableList()`
      - Remove direct `inspectedWindow` import
      - Import from `@/devtools/services/databaseService`
      - Handle `ServiceResponse` envelope
      - Test table list loading
    - Update `TableTab/TableContent.tsx` to use `databaseService.getTableSchema()`
      - Remove direct `inspectedWindow` import
      - Import from `@/devtools/services/databaseService`
      - Handle `ServiceResponse` envelope
      - Test schema display
    - Mark old `inspectedWindow` exports as `@deprecated`
    - Update component tests

- [x] **TASK-06**: Table Data & Schema UI
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05.1, TASK-05.6
  - **Boundary**: `src/devtools/components/TableTab/`
  - **Maps to**: FR-018, FR-019, FR-020, FR-021, FR-022, FR-023, FR-043
  - **Note**: TASK-05.1 and TASK-05.6 now handle service layer implementation. This task focuses on UI components only.
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-06.md)
  - **DoD**:
    - TableContent with fixed header (field + type)
    - DDL info panel showing complete CREATE TABLE SQL
    - PaginationBar with page controls, custom limit, refresh, close
    - Multi-table tab support, clear on database change
    - UI styling with Tailwind CSS

- [x] **TASK-05.7**: Component Migration - Query Editor Components (SKIPPED - components don't exist yet)
- [x] **TASK-05.8**: Component Migration - Log & OPFS Components (SKIPPED - components don't exist yet)

### Original Tasks (Continued)

- [x] **TASK-09**: Log Streaming & Ring Buffer (Updated - Now depends on TASK-05.3, TASK-05.8)
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-03, TASK-05.3, TASK-05.8
  - **Boundary**: `src/contentScript/proxy/logProxy.ts`, `src/contentScript/subscriptions/LogRingBuffer.ts`, `src/devtools/components/LogTab/`
  - **Maps to**: FR-026, FR-029, FR-030, ADR-0004, ADR-0005
  - **Note**: TASK-05.3 and TASK-05.8 now handle service layer implementation. This task focuses on ring buffer and UI.
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-09.md)
  - **DoD**:
    - LogRingBuffer (500 entry circular buffer, batch every 100ms or 50 entries)
    - LogList with color-coded levels (info/debug/error)
    - LogFilter by level and sql/action/event fields
    - UI styling with Tailwind CSS

- [x] **TASK-10**: OPFS File Browser (Updated - Now depends on TASK-05.5, TASK-05.8)
  - **Priority**: P1
  - **Dependencies**: TASK-03, TASK-02, TASK-05.5, TASK-05.8
  - **Boundary**: `src/devtools/components/OPFSBrowser/`, `src/devtools/components/Sidebar/OPFSLink.tsx`
  - **Maps to**: FR-010, FR-011, FR-027, FR-028
  - **Note**: TASK-05.5 and TASK-05.8 now handle service layer implementation. This task focuses on UI components.
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-10.md)
  - **DoD**:
    - FileTree recursive component with expand/collapse
    - DownloadButton with browser download trigger
    - OPFSLink in sidebar (FaFile + "OPFS")
    - UI styling with Tailwind CSS

- [x] **F-002**: Database Tab Navigation Restructuring (NEW - Replaces TASK-07, TASK-08, TASK-11, TASK-101, TASK-102)
  - **Priority**: P0 (Blocker)
  - **Dependencies**: TASK-05.1, TASK-05.2, TASK-05.4, TASK-06
  - **Boundary**: `src/devtools/components/DatabaseTabs/`, `src/devtools/components/TablesTab/`, `src/devtools/components/QueryTab/`, `src/devtools/components/MigrationTab/`, `src/devtools/components/SeedTab/`, `src/devtools/components/AboutTab/`, `src/devtools/DevTools.tsx`
  - **Maps to**: F-002, FR-009, FR-009.1, FR-009.2, FR-015, FR-016, FR-017, FR-019, FR-022, FR-024, FR-025, FR-026, FR-027, FR-031, FR-032, FR-033, FR-034, FR-035
  - **Feature**: [F-002: Database Tab Navigation Restructuring](agent-docs/01-discovery/features/F-002-database-tab-navigation.md)
  - **Micro-Spec**: [completed](agent-docs/08-task/active/F-002.md)
  - **DoD**:
    - Create DatabaseTabs component with tab header (5 tabs: Tables, Query, Migration, Seed, About)
    - Implement nested routing structure: `/openedDB/:dbname` -> `/openedDB/:dbname/tables` (default)
    - Create TablesTab (refactor from DatabaseView): 25% table list sidebar + 75% content area
    - Create TableDetail component for `:tableName` route with split view (data + DDL)
    - Create QueryTab with CodeMirror SQL editor + results + export
    - Create MigrationTab with test controls (release/rollback)
    - Create SeedTab with test controls (release/rollback)
    - Create AboutTab with database metadata
    - Update DevTools.tsx routing to use nested routes
    - Update Sidebar links to navigate to `/openedDB/:dbname/tables`
    - UI styling with Tailwind CSS

- [x] **TASK-12**: Testing & Release
  - **Priority**: P0 (Blocker)
  - **Dependencies**: All previous tasks (including TASK-05.1 through TASK-05.8, F-002)
  - **Boundary**: Full extension, `public/icons/`, `package.json`
  - **Maps to**: All FR-001 to FR-044, NFR-005, F-001, F-002
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-12.md)
  - **DoD**:
    - Manual testing of all 44 MVP requirements
    - Service layer unit tests (all 10 functions)
    - Component integration tests (all migrated components)
    - Tailwind CSS styling polish
    - Critical bugs fixed
    - Extension icons (all sizes: 16, 32, 48, 128)
    - Production build (< 2MB, no errors)
    - Version bump to 1.0.0
    - Distributable ZIP created
    - Uploaded to Chrome Web Store

---

## Release v1.1.0 (Post-MVP) - Future Work

- [x] **TASK-201**: Query History
  - **Priority**: P2
  - **Dependencies**: v1.1.0 release
  - **Boundary**: `src/devtools/hooks/`
  - **Maps to**: FR-106
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-201.md)
  - **DoD**:
    - Hook `useQueryHistory.ts` created with TSDoc comments
    - History sidebar integrated into QueryTab
    - History persists across DevTools sessions (chrome.storage.local)
    - Maximum 50 entries per database enforced
    - Consecutive duplicate detection working
    - Clear history button functional
    - Click-to-load query working
    - Relative time formatting correct
    - Build passed with no errors

- [x] **TASK-202**: Keyboard Shortcuts
  - **Priority**: P2
  - **Dependencies**: v1.1.0 release
  - **Boundary**: Global keyboard handler
  - **Maps to**: FR-107
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-202.md)
  - **DoD**:
    - Hook `useKeyboardShortcuts.ts` created with TSDoc comments
    - Help modal component created with categorized shortcuts
    - Global shortcuts registered (Ctrl+B, Ctrl+/, Escape)
    - Navigation shortcuts registered (Ctrl+1-5)
    - Query tab shortcuts registered (Ctrl+Enter, Ctrl+L, Ctrl+H)
    - Shortcuts respect route context
    - Shortcuts don't trigger in editable inputs
    - Help modal displays all shortcuts grouped by category
    - Sidebar collapse state lifted to DevTools
    - QueryTab exposes functions via refs for global handler
    - Build passed with no errors

- [-] **TASK-203**: Dark/Light Theme Toggle
  - **Priority**: P2
  - **Dependencies**: v1.1.0 release
  - **Boundary**: Theme provider, settings panel
  - **Maps to**: FR-108
  - **Micro-Spec**: [draft](agent-docs/08-task/active/TASK-203.md)
  - **DoD**: Theme toggle, persists to chrome.storage

---

## Release v1.2.0 (Enhancements) - Future Work

- [x] **F-003**: Schema Panel Enhancement (NEW)
  - **Priority**: P1 (High)
  - **Dependencies**: F-002 (Database Tab Navigation)
  - **Boundary**: `src/devtools/components/TablesTab/TableDetail.tsx`, `src/devtools/components/TablesTab/SchemaPanel.tsx`
  - **Maps to**: F-003
  - **Feature**: [F-003: Schema Panel Enhancement](agent-docs/01-discovery/features/F-003-schema-panel-enhancement.md)
  - **Evidence**: 6 new components created, TableDetail updated with state + handlers + responsive width
  - **DoD**:
    - [x] Toggle button with BsReverseLayoutSidebarInsetReverse icon to show/hide panel
    - [x] Panel hidden by default (state: false)
    - [x] Remove "SCHEMA" title from schema panel
    - [x] Add header with two tab buttons: Table icon (ImTable2) + DDL text
    - [x] Active tab shows emerald-50 background, emerald-600 text
    - [x] Inactive tab shows gray-500 text
    - [x] Table view displays column info table
    - [x] DDL view displays SQL CREATE TABLE statement
    - [x] Table data expands to full width when panel hidden
    - [x] Smooth CSS transition (150-200ms) for collapse/expand
    - [x] Small button size (text-xs) matching pagination style
    - [x] Import icons from react-icons (bs, im)
    - [x] Build passed with no errors

- [x] **F-004**: DDL Syntax Highlight & Copy Button (COMPLETED)
  - **Priority**: P2 (Medium)
  - **Dependencies**: F-003 (Schema Panel Enhancement)
  - **Boundary**: `src/devtools/components/TablesTab/SchemaDDLView.tsx`
  - **Maps to**: F-004
  - **Feature**: [F-004: DDL Syntax Highlight & Copy Button](agent-docs/01-discovery/features/F-004-ddl-syntax-highlight-copy.md)
  - **Completed**: 2026-01-14
  - **DoD**:
    - [x] SQL syntax highlighting with react-syntax-highlighter (Prism.js light theme)
    - [x] Copy button with MdOutlineContentCopy icon
    - [x] Success feedback with FaCheck icon (green)
    - [x] Clipboard API integration with error handling
    - [x] Inline error message if copy fails
    - [x] Build passed with no errors

- [x] **TASK-301**: Opened Table Tabs Management Feature (F-005)
  - **Priority**: P1 (High)
  - **Dependencies**: F-002, F-003
  - **Boundary**: `src/devtools/components/TablesTab/OpenedTableTabs.tsx`, `src/devtools/components/TablesTab/TableDetail.tsx`, `src/devtools/components/TablesTab/TablesTab.tsx`
  - **Maps to**: F-005
  - **Feature**: [F-005: Opened Table Tabs Management](agent-docs/01-discovery/features/F-005-opened-table-tabs-management.md)
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-301.md)
  - **Estimated**: 10 hours (3-4 days)
  - **Completed**: 2026-01-14
  - **DoD**:
    - [x] **Component: OpenedTableTabs.tsx** (4 hours)
      - [x] Create `OpenedTableTabs.tsx` component file
      - [x] Implement `TabButton` sub-component (memoized with React.memo)
        - Table name with truncate (max-w-150px)
        - Close button with `IoMdClose` icon (react-icons/io)
        - Close button hidden by default (opacity-0), visible on group-hover (opacity-100)
        - Click stops propagation on close button
      - [x] Implement empty state: "No tables open. Select a table from the sidebar."
      - [x] Props interface: `dbname`, `tabs`, `activeTab`, `onOpenTable`, `onSelectTab`, `onCloseTab`
      - [x] Active tab styling: bg-blue-600 text-white
      - [x] Inactive tab styling: bg-gray-100 text-gray-700 hover:bg-gray-200
      - [x] Close button hover: bg-blue-700 (active), bg-gray-300 (inactive)
      - [x] Export component and types
    - [x] **State Management in TablesTab** (3 hours)
      - [x] Add state: `openedTabs: TableTab[]` (default: [])
      - [x] Add state: `activeTab: TableTab | null` (default: null)
      - [x] Add `handleOpenTable(tableName)` handler
        - Check if table already in openedTabs
        - If not, append to openedTabs
        - Set as activeTab
        - Navigate to table route
      - [x] Add `handleSelectTab(tab)` handler
        - Set as active tab
        - Navigate to table route
      - [x] Add `handleCloseTab(tab)` handler
        - Filter closed tab from openedTabs
        - If other tabs exist: select tab at same index (or last), update activeTab, navigate
        - If no tabs exist: set activeTab to null, navigate to `/openedDB/:dbname/tables`
    - [x] **Integration with TablesTab** (2 hours)
      - [x] Create OpenedTabsContext and useOpenedTabs hook
      - [x] Update TablesTab sidebar onClick to call handleOpenTable
      - [x] Wire up state and handlers via context provider
    - [x] **Integration with TableDetail** (1 hour)
      - [x] Import OpenedTableTabs component
      - [x] Consume context via useOpenedTabs hook
      - [x] Remove old TableTabButton component
      - [x] Remove tables.map() loop and loading states
      - [x] Render OpenedTableTabs in header
    - [x] **Testing** (1 hour)
      - [x] Clicking sidebar table adds to opened tabs
      - [x] No duplicate tabs created
      - [x] Close button visible on hover, hidden by default
      - [x] Closing active tab switches to next tab
      - [x] Closing inactive tab keeps current active
      - [x] Closing last tab shows empty state
      - [x] Navigation updates correctly on all actions
    - [x] Build passed with no errors

- [x] **TASK-302**: Resizable Vertical Dividers Feature (F-006)
  - **Priority**: P2 (Medium)
  - **Dependencies**: F-005
  - **Boundary**: `src/devtools/components/Shared/ResizeHandle.tsx`, `src/devtools/components/TablesTab/TablesTab.tsx`, `src/devtools/components/TablesTab/TableDetail.tsx`
  - **Maps to**: F-006
  - **Feature**: [F-006: Resizable Vertical Dividers](agent-docs/01-discovery/features/F-006-resizable-vertical-dividers.md)
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-302.md)
  - **Estimated**: 10 hours (3-4 days)
  - **Completed**: 2026-01-14
  - **DoD**:
    - [x] **Component: ResizeHandle.tsx** (4 hours)
      - [x] Create `ResizeHandle.tsx` in Shared components folder
      - [x] Props interface: `position`, `onDrag`, `minWidth`, `maxWidth`, `currentWidth`
      - [x] Add state: `isDragging`, `dragStartX`
      - [x] Implement `handleMouseDown(e)` - Start drag, capture initial X
      - [x] Implement `handleMouseMove(e)` in useEffect
        - [x] Calculate delta X from dragStartX
        - [x] Adjust delta based on position (left vs right)
        - [x] Enforce min/max constraints
        - [x] Call `onDrag(adjustedDelta)`
        - [x] Update dragStartX for next frame
      - [x] Implement `handleMouseUp()` - End drag, cleanup listeners
      - [x] Cursor change: `cursor: col-resize` (inline style)
      - [x] Visual hover state: `hover:bg-blue-200 hover:w-2`
      - [x] Visual dragging state: `w-2 bg-blue-300`
      - [x] Positioning: absolute, left/right offset, top-0, bottom-0
      - [x] ARIA attributes: `role="separator"`, `aria-orientation="vertical"`, `aria-label="Resize panel"`
      - [x] Export component
    - [x] **TablesTab Resizable Sidebar** (3 hours)
      - [x] Add state: `sidebarWidth: number` (default: 300)
      - [x] Add `handleSidebarResize(deltaX)` handler
        - [x] Update width: `prev + deltaX`
        - [x] Enforce constraints: `Math.max(200, Math.min(600, newWidth))`
      - [x] Apply inline style to sidebar
      - [x] Add `relative` class to sidebar container
      - [x] Add ResizeHandle at right edge (position="right", minWidth=200, maxWidth=600)
      - [x] Remove fixed `w-1/4` class from sidebar
    - [x] **TableDetail Resizable Schema Panel** (3 hours)
      - [x] Add state: `schemaPanelWidth: number` (default: 320)
      - [x] Add `handleSchemaResize(deltaX)` handler
        - [x] Update width: `prev - deltaX` (subtract because dragging left expands)
        - [x] Enforce constraints: `Math.max(250, Math.min(600, newWidth))`
      - [x] Apply inline style to schema panel wrapper
      - [x] Add `relative` class to schema panel wrapper
      - [x] Add ResizeHandle at left edge (position="left", minWidth=250, maxWidth=600)
      - [x] Only show ResizeHandle when `schemaPanelVisible === true`
      - [x] Remove fixed `w-80` class from schema panel
    - [x] **Testing** (1 hour)
      - [x] Cursor changes to col-resize on hover
      - [x] Visual indicator appears on hover
      - [x] Sidebar resize works (200-600px)
      - [x] Schema panel resize works (250-600px)
      - [x] Table content area adjusts during resize
      - [x] No horizontal scroll during resize
      - [x] Resize is smooth (60fps)
      - [x] Resize works when schema panel hidden
    - [x] Build passed with no errors

- [x] **TASK-303**: Integration Testing & Polish (F-005, F-006)
  - **Priority**: P1 (High)
  - **Dependencies**: TASK-301, TASK-302
  - **Boundary**: Full extension, manual testing
  - **Maps to**: F-005, F-006
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-303.md)
  - **Estimated**: 6 hours (1 day)
  - **Completed**: 2026-01-14
  - **DoD**:
    - [x] **Cross-feature Testing** (2 hours)
      - [x] Resize works with opened tabs
      - [x] Schema panel toggle works with custom width
      - [x] Tab close works with custom panel widths
      - [x] No state conflicts between features
    - [x] **Edge Cases** (2 hours)
      - [x] Closing tab while resizing
      - [x] Switching databases resets opened tabs
      - [x] Min/max constraints enforced correctly
      - [x] Mouse release outside browser window handled
    - [x] **Polish** (2 hours)
      - [x] Fix any visual glitches (fixed: content area flex-1)
      - [x] Fix any state bugs
      - [x] Update HLD if needed
      - [x] Update LLD if needed
      - [x] Update feature docs with completion status
    - [x] Build passed with no errors
    - [x] Extension loads and functions correctly

- [x] **TASK-304**: Opened Database List Route Feature (F-008)
  - **Priority**: P1 (High)
  - **Dependencies**: F-002 (Database Tab Navigation), F-007 (Uniform Theme Configuration)
  - **Boundary**: `src/devtools/components/OpenedDBList/`, `src/devtools/DevTools.tsx`, `src/devtools/components/Sidebar/DatabaseList.tsx`
  - **Maps to**: F-008
  - **Feature**: [F-008: Opened Database List Route](agent-docs/01-discovery/features/F-008-opened-database-list-route.md)
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-304.md)
  - **Estimated**: 12 hours (3-4 days)
  - **Completed**: 2026-01-14
  - **DoD**:
    - [x] **Component: OpenedDBList.tsx** (1.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/OpenedDBList.tsx` file
      - [x] Implement data fetching with `useInspectedWindowRequest(() => databaseService.getDatabases())`
      - [x] Add state management: `databases`, `isLoading`, `error`, `reload`
      - [x] Implement conditional rendering: LoadingSkeleton, ErrorState, EmptyDatabaseList, DatabaseList
      - [x] Export component and types
    - [x] **Component: DatabaseCard.tsx** (1 hour)
      - [x] Create `src/devtools/components/OpenedDBList/DatabaseCard.tsx` file
      - [x] Implement clickable card with FaDatabase icon (react-icons/fa)
      - [x] Display database name (bold, primary text)
      - [x] Implement onClick navigation: `/openedDB/:dbname/tables` with encodeURIComponent
      - [x] Add active state styling: bg-primary-50 border-primary-600 shadow-sm
      - [x] Add hover state styling: hover:border-primary-300 hover:shadow-sm
      - [x] Add ARIA label: `aria-label="Open database ${database.name}"`
      - [x] Export component and types
    - [x] **Component: EmptyDatabaseList.tsx** (1 hour)
      - [x] Create `src/devtools/components/OpenedDBList/EmptyDatabaseList.tsx` file
      - [x] Display SiSqlite icon (text-primary-600, text-6xl) from react-icons/si
      - [x] Display title: "No Opened Databases" (text-2xl font-semibold text-gray-700)
      - [x] Display message: "Could not detect any opened databases." (text-gray-600)
      - [x] Display instructions: "Open a page that uses web-sqlite-js..." (text-gray-500 text-sm)
      - [x] Add refresh button with IoMdRefresh icon (react-icons/io)
      - [x] Style button: bg-primary-600 text-white hover:bg-primary-700
      - [x] Add ARIA label: `aria-label="Refresh database list"`
      - [x] Export component and types
    - [x] **Component: LoadingSkeleton.tsx** (0.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/LoadingSkeleton.tsx` file
      - [x] Display 3 skeleton cards with bg-gray-200 animate-pulse
      - [x] Match DatabaseCard layout (flex, gap, padding)
      - [x] Export component
    - [x] **Component: ErrorState.tsx** (0.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/ErrorState.tsx` file
      - [x] Display FaExclamationCircle icon (react-icons/fa) with text-error-600
      - [x] Display error message (text-gray-600)
      - [x] Add retry button with IoMdRefresh icon (react-icons/io)
      - [x] Style button: bg-primary-600 text-white hover:bg-primary-700
      - [x] Add ARIA label: `aria-label="Retry loading database list"`
      - [x] Export component and types
    - [x] **Component: Header.tsx** (0.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/Header.tsx` file
      - [x] Display title: "Opened Databases" (text-2xl font-semibold text-gray-700)
      - [x] Add database count badge in parentheses (if count provided)
      - [x] Add refresh button with IoMdRefresh icon (react-icons/io)
      - [x] Style button: p-2 text-gray-600 hover:text-gray-800 rounded hover:bg-gray-100
      - [x] Add ARIA label: `aria-label="Refresh database list"`
      - [x] Export component and types
    - [x] **Component: DatabaseList.tsx** (0.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/DatabaseList.tsx` file
      - [x] Implement active state detection using `useLocation()` and regex matching
      - [x] Render DatabaseCard for each database in databases array
      - [x] Pass isActive prop based on current route
      - [x] Use semantic HTML: `<nav>` with `aria-label="Database list"`
      - [x] Export component and types
    - [x] **Component: index.tsx** (0.5 hours)
      - [x] Create `src/devtools/components/OpenedDBList/index.tsx` file
      - [x] Export OpenedDBList component
      - [x] Re-export all sub-components for testing
    - [x] **Route Configuration** (2 hours)
      - [x] Update `src/devtools/DevTools.tsx`
      - [x] Add `/openedDB` route BEFORE `/openedDB/:dbname` route (critical)
      - [x] Import OpenedDBList component
      - [x] Verify route order: Generic route must precede parameterized route
      - [x] Test direct navigation to `/openedDB`
      - [x] Update sidebar "Opened DB" link from `to="/"` to `to="/openedDB"`
      - [x] Test sidebar navigation
    - [x] **Integration & Testing** (3 hours)
      - [x] Test loading state on initial load (shows LoadingSkeleton)
      - [x] Test empty state when no databases (shows EmptyDatabaseList with refresh button)
      - [x] Test error state with retry button (shows ErrorState)
      - [x] Test database list display (shows DatabaseCard components)
      - [x] Test refresh functionality (header button re-fetches data)
      - [x] Test navigation: Click card -> navigates to `/openedDB/:dbname/tables`
      - [x] Test active state highlighting (current database highlighted)
      - [x] Test keyboard navigation (Tab through cards, Enter to activate)
      - [x] Test URL encoding (database names with special characters)
      - [x] Test sidebar link navigation (click "Opened DB" -> /openedDB)
      - [x] Fix any bugs found during testing
    - [x] **Documentation** (1 hour)
      - [x] Update feature spec: `agent-docs/01-discovery/features/F-008-opened-database-list-route.md`
        - Mark all acceptance criteria as complete
      - [x] Update HLD: `agent-docs/03-architecture/01-hld.md`
        - Add implementation notes if needed
      - [x] Update LLD: `agent-docs/05-design/03-modules/opened-db-list.md`
        - Add implementation notes and completion status
      - [x] Update module doc implementation status
      - [x] Verify all DoD items complete
    - [x] **Build & Verification** (0.5 hours)
      - [x] Run build: `npm run build`
      - [x] Verify no errors
      - [x] Check bundle size
      - [x] Run TypeScript: `npm run typecheck`
      - [x] Verify no type errors
    - [x] **Acceptance Criteria Verification** (0.5 hours)
      - [x] Route Structure: `/openedDB` route exists, direct navigation works
      - [x] Sidebar Navigation: "Opened DB" link navigates to `/openedDB`, active state highlights
      - [x] Database List Display: Fetches databases, displays cards, shows name
      - [x] Empty State: Shows SiSqlite icon, title, message, instructions, refresh button
      - [x] Refresh Functionality: Header and empty state buttons work, loading state shows
      - [x] Edge Cases: Loading, error, empty, single database, multiple databases all work
    - [x] Build passed with no errors (3.06s)
    - [x] Feature spec marked complete

- [x] **TASK-305**: Log Tab Integration Feature (F-009)
  - **Priority**: P2 (Medium)
  - **Dependencies**: F-002 (Database Tab Navigation), TASK-09 (Log Streaming - provides LogView component)
  - **Boundary**: `src/devtools/components/DatabaseTabs/DatabaseTabHeader.tsx`, `src/devtools/DevTools.tsx`
  - **Maps to**: F-009
  - **Feature**: [F-009: Log Tab Integration](agent-docs/01-discovery/features/F-009-log-tab.md)
  - **Estimated**: 0.5-1 hour
  - **Completed**: 2026-01-14
  - **Micro-Spec**: [completed](agent-docs/08-task/active/TASK-305.md)
  - **DoD**:
    - [x] **Tab Header Update** (0.25 hour)
      - [x] Add import: `import { IoTimeOutline } from "react-icons/io5";` to DatabaseTabHeader.tsx
      - [x] Add logs tab to DATABASE_TABS array after "query" tab
        - [x] Position: 3rd tab (between Query and Migration)
        - [x] Icon: `<IoTimeOutline size={18} />`
        - [x] Label: "Log"
        - [x] Path: "logs"
      - [x] Export DATABASE_TABS array (unchanged)
      - [x] Verify TypeScript compilation
    - [x] **Route Configuration** (0.25 hour)
      - [x] Update `src/devtools/DevTools.tsx`
      - [x] Add `<Route path="logs" element={<LogView />} />` to DatabaseTabs nested routes
      - [x] Place logs route BEFORE migration route (maintains tab order)
      - [x] Import LogView component from `@/devtools/components/LogTab/LogView`
      - [x] Verify nested route structure
      - [x] Verify TypeScript compilation
    - [x] **Testing & Verification** (0.25 hour)
      - [x] Click "Log" tab → should navigate to `/openedDB/:dbname/logs`
      - [x] Verify tab highlights with active state styling (border-b-2 border-primary-600 text-primary-600)
      - [x] Verify LogView renders correctly
      - [x] Test tab switching between all 6 tabs (Tables, Query, Log, Migration, Seed, About)
      - [x] Test with different databases
      - [x] Verify log functionality works (filtering, subscription)
      - [x] Test direct URL access to `/openedDB/:dbname/logs`
      - [x] Verify no console errors
    - [x] **Build Verification** (0.125 hour)
      - [x] Run `npm run build` - verify no errors
      - [x] Run `npm run typecheck` - verify no type errors
      - [x] Check bundle size impact (< 5KB increase)
    - [x] **Documentation** (0.125 hour)
      - [x] Update feature spec: `agent-docs/01-discovery/features/F-009-log-tab.md`
        - Mark all acceptance criteria as complete
      - [x] Update LLD: `agent-docs/05-design/03-modules/log-tab-integration.md`
        - Add implementation notes and completion status
      - [x] Update module doc implementation status
      - [x] Update status board with completion evidence
    - [x] Build passed with no errors
    - [x] Feature spec marked complete

- [x] **TASK-306**: Database Refresh Coordination Feature (F-010)
  - **Priority**: P2 (Medium)
  - **Dependencies**: F-002 (Database Tab Navigation), F-008 (Opened Database List Route), TASK-09 (Log Streaming - provides context pattern reference)
  - **Boundary**: `src/devtools/contexts/DatabaseRefreshContext.tsx` (NEW), `src/devtools/DevTools.tsx`, `src/devtools/components/Sidebar/DatabaseList.tsx`, `src/devtools/components/OpenedDBList/OpenedDBList.tsx`
  - **Maps to**: F-010
  - **Feature**: [F-010: Database Refresh Coordination](agent-docs/01-discovery/features/F-010-database-refresh-coordination.md)
  - **Estimated**: 1-2 hours
  - **Micro-Spec**: [draft](agent-docs/08-task/active/TASK-306.md)
  - **DoD**:
    - [ ] **Context Creation** (0.5 hour)
      - [ ] Create `src/devtools/contexts/DatabaseRefreshContext.tsx`
      - [ ] Define `DatabaseRefreshContextValue` interface
      - [ ] Create `DatabaseRefreshContext` with null default
      - [ ] Implement `DatabaseRefreshProvider` component
        - [ ] Add refreshVersion state (useState, default 0)
        - [ ] Implement triggerRefresh callback (useCallback)
        - [ ] Memoize context value (useMemo)
        - [ ] Add TSDoc comments
      - [ ] Implement `useDatabaseRefresh` hook
        - [ ] Call useContext
        - [ ] Add error if context missing
        - [ ] Add TSDoc comments
      - [ ] Export context, provider, and hook
      - [ ] Verify TypeScript compilation
    - [ ] **DevTools Integration** (0.25 hour)
      - [ ] Import `DatabaseRefreshProvider` in DevTools.tsx
      - [ ] Wrap DevToolsContent return with provider
      - [ ] Verify provider placement (before Sidebar/main split)
      - [ ] Verify TypeScript compilation
    - [ ] **Sidebar Integration** (0.5 hour)
      - [ ] Import `useDatabaseRefresh` in DatabaseList.tsx
      - [ ] Import `IoMdRefresh` icon from react-icons/io
      - [ ] Consume context in component
      - [ ] Add refreshVersion to dependency array
      - [ ] Add refresh button to header (left side)
        - [ ] Button positioned before SidebarLink
        - [ ] Flex container for layout
        - [ ] Button styling (text-secondary-500 hover:text-primary-600)
        - [ ] ARIA label added
      - [ ] Test refresh button functionality
      - [ ] Test collapsed/expanded states
      - [ ] Verify TypeScript compilation
    - [ ] **Main Page Integration** (0.25 hour)
      - [ ] Import `useDatabaseRefresh` in OpenedDBList.tsx
      - [ ] Consume context in component
      - [ ] Add refreshVersion to dependency array
      - [ ] Pass triggerRefresh to Header (existing prop)
      - [ ] Verify TypeScript compilation
    - [ ] **Testing & Verification** (0.5 hour)
      - [ ] Test bidirectional refresh (main page → sidebar)
      - [ ] Test bidirectional refresh (sidebar → main page)
      - [ ] Test data consistency (both show same data)
      - [ ] Test collapsed sidebar (button visible, works)
      - [ ] Test expanded sidebar (button visible, works)
      - [ ] Test error state (both refresh buttons work)
      - [ ] Test empty state (both refresh buttons work)
      - [ ] Test rapid clicks (debounced, single refresh)
      - [ ] Verify no console errors
      - [ ] Verify no TypeScript errors
    - [ ] **Build Verification** (0.125 hour)
      - [ ] Run `npm run build` - verify no errors
      - [ ] Run `npm run typecheck` - verify no type errors
      - [ ] Check bundle size impact (< 5KB expected)
    - [ ] **Documentation** (0.125 hour)
      - [ ] Update feature spec: `agent-docs/01-discovery/features/F-010-database-refresh-coordination.md`
        - Mark all acceptance criteria as complete
      - [ ] Update LLD: `agent-docs/05-design/03-modules/database-refresh.md`
        - Add implementation notes and completion status
      - [ ] Update status board with completion evidence
      - [ ] Verify all DoD items complete
